{"ast":null,"code":"/**\n * 오디오 녹음 및 재생을 위한 유틸리티 클래스\n */\n\n// 녹음 상태 인터페이스\n\n// 마이크 액세스 요청 함수\nexport const requestMicrophoneAccess = async () => {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({\n      audio: true\n    });\n    return stream;\n  } catch (error) {\n    console.error('Error accessing microphone:', error);\n    throw error;\n  }\n};\n\n/**\n * 오디오 녹음 및 관리를 위한 클래스\n */\nexport class AudioRecorder {\n  constructor() {\n    this.mediaRecorder = null;\n    this.audioChunks = [];\n    this.stream = null;\n  }\n  /**\n   * 오디오 녹음 시작\n   */\n  async startRecording() {\n    try {\n      this.stream = await requestMicrophoneAccess();\n      this.mediaRecorder = new MediaRecorder(this.stream);\n      this.audioChunks = [];\n      this.mediaRecorder.addEventListener('dataavailable', event => {\n        if (event.data.size > 0) {\n          this.audioChunks.push(event.data);\n        }\n      });\n      this.mediaRecorder.start();\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      throw new Error('Failed to start recording');\n    }\n  }\n\n  /**\n   * 오디오 녹음 중지 및 Blob 반환\n   */\n  stopRecording() {\n    return new Promise((resolve, reject) => {\n      if (!this.mediaRecorder) {\n        reject(new Error('No recording in progress'));\n        return;\n      }\n      this.mediaRecorder.addEventListener('stop', () => {\n        const audioBlob = new Blob(this.audioChunks, {\n          type: 'audio/webm'\n        });\n        this.stopStream();\n        resolve(audioBlob);\n      });\n      this.mediaRecorder.stop();\n    });\n  }\n\n  /**\n   * 스트림의 모든 트랙 중지\n   */\n  stopStream() {\n    if (this.stream) {\n      this.stream.getTracks().forEach(track => track.stop());\n      this.stream = null;\n    }\n  }\n\n  /**\n   * Blob에서 오디오 URL 생성\n   */\n  static createAudioURL(blob) {\n    return URL.createObjectURL(blob);\n  }\n\n  /**\n   * 오디오 URL 해제\n   */\n  static revokeAudioURL(url) {\n    URL.revokeObjectURL(url);\n  }\n\n  /**\n   * 텍스트를 음성으로 변환 (TTS)\n   */\n  static textToSpeech(text, lang = 'ko-KR') {\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = lang;\n    return utterance;\n  }\n\n  /**\n   * 한국어 텍스트 여부 확인\n   */\n  static isKoreanText(text) {\n    return !!text.match(/[ㄱ-ㅣ|가-힣]/);\n  }\n}\n\n/**\n * URL에서 오디오 재생\n */\nexport const playAudio = url => {\n  const audio = new Audio(url);\n  audio.play();\n  return audio;\n};","map":{"version":3,"names":["requestMicrophoneAccess","stream","navigator","mediaDevices","getUserMedia","audio","error","console","AudioRecorder","constructor","mediaRecorder","audioChunks","startRecording","MediaRecorder","addEventListener","event","data","size","push","start","Error","stopRecording","Promise","resolve","reject","audioBlob","Blob","type","stopStream","stop","getTracks","forEach","track","createAudioURL","blob","URL","createObjectURL","revokeAudioURL","url","revokeObjectURL","textToSpeech","text","lang","utterance","SpeechSynthesisUtterance","isKoreanText","match","playAudio","Audio","play"],"sources":["/Users/bagjun-won/test-3d/learning-interface/src/services/audioService.ts"],"sourcesContent":["/**\n * 오디오 녹음 및 재생을 위한 유틸리티 클래스\n */\n\n// 녹음 상태 인터페이스\nexport interface RecordingState {\n  isRecording: boolean;\n  audioURL: string | null;\n}\n\n// 마이크 액세스 요청 함수\nexport const requestMicrophoneAccess = async (): Promise<MediaStream> => {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n    return stream;\n  } catch (error) {\n    console.error('Error accessing microphone:', error);\n    throw error;\n  }\n};\n\n/**\n * 오디오 녹음 및 관리를 위한 클래스\n */\nexport class AudioRecorder {\n  private mediaRecorder: MediaRecorder | null = null;\n  private audioChunks: Blob[] = [];\n  private stream: MediaStream | null = null;\n  \n  /**\n   * 오디오 녹음 시작\n   */\n  public async startRecording(): Promise<void> {\n    try {\n      this.stream = await requestMicrophoneAccess();\n      this.mediaRecorder = new MediaRecorder(this.stream);\n      this.audioChunks = [];\n      \n      this.mediaRecorder.addEventListener('dataavailable', (event) => {\n        if (event.data.size > 0) {\n          this.audioChunks.push(event.data);\n        }\n      });\n      \n      this.mediaRecorder.start();\n    } catch (error) {\n      console.error('Error starting recording:', error);\n      throw new Error('Failed to start recording');\n    }\n  }\n  \n  /**\n   * 오디오 녹음 중지 및 Blob 반환\n   */\n  public stopRecording(): Promise<Blob> {\n    return new Promise((resolve, reject) => {\n      if (!this.mediaRecorder) {\n        reject(new Error('No recording in progress'));\n        return;\n      }\n      \n      this.mediaRecorder.addEventListener('stop', () => {\n        const audioBlob = new Blob(this.audioChunks, { type: 'audio/webm' });\n        this.stopStream();\n        resolve(audioBlob);\n      });\n      \n      this.mediaRecorder.stop();\n    });\n  }\n  \n  /**\n   * 스트림의 모든 트랙 중지\n   */\n  private stopStream(): void {\n    if (this.stream) {\n      this.stream.getTracks().forEach(track => track.stop());\n      this.stream = null;\n    }\n  }\n  \n  /**\n   * Blob에서 오디오 URL 생성\n   */\n  public static createAudioURL(blob: Blob): string {\n    return URL.createObjectURL(blob);\n  }\n  \n  /**\n   * 오디오 URL 해제\n   */\n  public static revokeAudioURL(url: string): void {\n    URL.revokeObjectURL(url);\n  }\n  \n  /**\n   * 텍스트를 음성으로 변환 (TTS)\n   */\n  public static textToSpeech(text: string, lang: string = 'ko-KR'): SpeechSynthesisUtterance {\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = lang;\n    return utterance;\n  }\n  \n  /**\n   * 한국어 텍스트 여부 확인\n   */\n  public static isKoreanText(text: string): boolean {\n    return !!text.match(/[ㄱ-ㅣ|가-힣]/);\n  }\n}\n\n/**\n * URL에서 오디오 재생\n */\nexport const playAudio = (url: string): HTMLAudioElement => {\n  const audio = new Audio(url);\n  audio.play();\n  return audio;\n};\n"],"mappings":"AAAA;AACA;AACA;;AAEA;;AAMA;AACA,OAAO,MAAMA,uBAAuB,GAAG,MAAAA,CAAA,KAAkC;EACvE,IAAI;IACF,MAAMC,MAAM,GAAG,MAAMC,SAAS,CAACC,YAAY,CAACC,YAAY,CAAC;MAAEC,KAAK,EAAE;IAAK,CAAC,CAAC;IACzE,OAAOJ,MAAM;EACf,CAAC,CAAC,OAAOK,KAAK,EAAE;IACdC,OAAO,CAACD,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;IACnD,MAAMA,KAAK;EACb;AACF,CAAC;;AAED;AACA;AACA;AACA,OAAO,MAAME,aAAa,CAAC;EAAAC,YAAA;IAAA,KACjBC,aAAa,GAAyB,IAAI;IAAA,KAC1CC,WAAW,GAAW,EAAE;IAAA,KACxBV,MAAM,GAAuB,IAAI;EAAA;EAEzC;AACF;AACA;EACE,MAAaW,cAAcA,CAAA,EAAkB;IAC3C,IAAI;MACF,IAAI,CAACX,MAAM,GAAG,MAAMD,uBAAuB,CAAC,CAAC;MAC7C,IAAI,CAACU,aAAa,GAAG,IAAIG,aAAa,CAAC,IAAI,CAACZ,MAAM,CAAC;MACnD,IAAI,CAACU,WAAW,GAAG,EAAE;MAErB,IAAI,CAACD,aAAa,CAACI,gBAAgB,CAAC,eAAe,EAAGC,KAAK,IAAK;QAC9D,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,GAAG,CAAC,EAAE;UACvB,IAAI,CAACN,WAAW,CAACO,IAAI,CAACH,KAAK,CAACC,IAAI,CAAC;QACnC;MACF,CAAC,CAAC;MAEF,IAAI,CAACN,aAAa,CAACS,KAAK,CAAC,CAAC;IAC5B,CAAC,CAAC,OAAOb,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,MAAM,IAAIc,KAAK,CAAC,2BAA2B,CAAC;IAC9C;EACF;;EAEA;AACF;AACA;EACSC,aAAaA,CAAA,EAAkB;IACpC,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;MACtC,IAAI,CAAC,IAAI,CAACd,aAAa,EAAE;QACvBc,MAAM,CAAC,IAAIJ,KAAK,CAAC,0BAA0B,CAAC,CAAC;QAC7C;MACF;MAEA,IAAI,CAACV,aAAa,CAACI,gBAAgB,CAAC,MAAM,EAAE,MAAM;QAChD,MAAMW,SAAS,GAAG,IAAIC,IAAI,CAAC,IAAI,CAACf,WAAW,EAAE;UAAEgB,IAAI,EAAE;QAAa,CAAC,CAAC;QACpE,IAAI,CAACC,UAAU,CAAC,CAAC;QACjBL,OAAO,CAACE,SAAS,CAAC;MACpB,CAAC,CAAC;MAEF,IAAI,CAACf,aAAa,CAACmB,IAAI,CAAC,CAAC;IAC3B,CAAC,CAAC;EACJ;;EAEA;AACF;AACA;EACUD,UAAUA,CAAA,EAAS;IACzB,IAAI,IAAI,CAAC3B,MAAM,EAAE;MACf,IAAI,CAACA,MAAM,CAAC6B,SAAS,CAAC,CAAC,CAACC,OAAO,CAACC,KAAK,IAAIA,KAAK,CAACH,IAAI,CAAC,CAAC,CAAC;MACtD,IAAI,CAAC5B,MAAM,GAAG,IAAI;IACpB;EACF;;EAEA;AACF;AACA;EACE,OAAcgC,cAAcA,CAACC,IAAU,EAAU;IAC/C,OAAOC,GAAG,CAACC,eAAe,CAACF,IAAI,CAAC;EAClC;;EAEA;AACF;AACA;EACE,OAAcG,cAAcA,CAACC,GAAW,EAAQ;IAC9CH,GAAG,CAACI,eAAe,CAACD,GAAG,CAAC;EAC1B;;EAEA;AACF;AACA;EACE,OAAcE,YAAYA,CAACC,IAAY,EAAEC,IAAY,GAAG,OAAO,EAA4B;IACzF,MAAMC,SAAS,GAAG,IAAIC,wBAAwB,CAACH,IAAI,CAAC;IACpDE,SAAS,CAACD,IAAI,GAAGA,IAAI;IACrB,OAAOC,SAAS;EAClB;;EAEA;AACF;AACA;EACE,OAAcE,YAAYA,CAACJ,IAAY,EAAW;IAChD,OAAO,CAAC,CAACA,IAAI,CAACK,KAAK,CAAC,WAAW,CAAC;EAClC;AACF;;AAEA;AACA;AACA;AACA,OAAO,MAAMC,SAAS,GAAIT,GAAW,IAAuB;EAC1D,MAAMjC,KAAK,GAAG,IAAI2C,KAAK,CAACV,GAAG,CAAC;EAC5BjC,KAAK,CAAC4C,IAAI,CAAC,CAAC;EACZ,OAAO5C,KAAK;AACd,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}